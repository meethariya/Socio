<div class="comment-group">
  <div class="content-group">
    <a class="comment-name" [routerLink]="`/profile/${comment().username}`"><b>{{comment().username}}</b></a>
    @if (isEditing) {
      <form class="edit-comment-form" [formGroup]="commentForm" (ngSubmit)="submitForm()">
        <input class="comment-input" type="text" name="content" placeholder="comment here..." formControlName="content">
        <button type="submit" class="comment-submit" [disabled]="commentForm.invalid" title="submit">
          <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.2929 4.29289C12.6834 3.90237 13.3166 3.90237 13.7071 4.29289L20.7071 11.2929C21.0976 11.6834 21.0976 12.3166 20.7071 12.7071L13.7071 19.7071C13.3166 20.0976 12.6834 20.0976 12.2929 19.7071C11.9024 19.3166 11.9024 18.6834 12.2929 18.2929L17.5858 13H4C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11H17.5858L12.2929 5.70711C11.9024 5.31658 11.9024 4.68342 12.2929 4.29289Z" fill="currentColor"/>
          </svg>
        </button>
      </form>
    }
    @else {
      <span class="comment-content">{{comment().content}}</span>
    }
  </div>
  @if (isSelf) {
    <div class="cta-group">
      @if (isEditing) {
        <svg xmlns="http://www.w3.org/2000/svg" fill="var(--bs-primary)" width="24px" height="24px" viewBox="0 0 32 32" class="comment-edit-cancel" (click)="isEditing = false">
          <path d="M19.587 16.001l6.096 6.096c0.396 0.396 0.396 1.039 0 1.435l-2.151 2.151c-0.396 0.396-1.038 0.396-1.435 0l-6.097-6.096-6.097 6.096c-0.396 0.396-1.038 0.396-1.434 0l-2.152-2.151c-0.396-0.396-0.396-1.038 0-1.435l6.097-6.096-6.097-6.097c-0.396-0.396-0.396-1.039 0-1.435l2.153-2.151c0.396-0.396 1.038-0.396 1.434 0l6.096 6.097 6.097-6.097c0.396-0.396 1.038-0.396 1.435 0l2.151 2.152c0.396 0.396 0.396 1.038 0 1.435l-6.096 6.096z"/>
        </svg>
      }
      @else {
        <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-edit" (click)="editComment()">
          <path
            d="M20.1497 7.93997L8.27971 19.81C7.21971 20.88 4.04971 21.3699 3.27971 20.6599C2.50971 19.9499 3.06969 16.78 4.12969 15.71L15.9997 3.84C16.5478 3.31801 17.2783 3.03097 18.0351 3.04019C18.7919 3.04942 19.5151 3.35418 20.0503 3.88938C20.5855 4.42457 20.8903 5.14781 20.8995 5.90463C20.9088 6.66146 20.6217 7.39189 20.0997 7.93997H20.1497Z"
            stroke="var(--bs-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M21 21H12" stroke="var(--bs-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      }
      <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-delete" (click)="deleteComment()">
        <path d="M10 11V17" stroke="var(--bs-danger)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M14 11V17" stroke="var(--bs-danger)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M4 7H20" stroke="var(--bs-danger)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M6 7H12H18V18C18 19.6569 16.6569 21 15 21H9C7.34315 21 6 19.6569 6 18V7Z" stroke="var(--bs-danger)"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="var(--bs-danger)"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
  }
</div>
<span class="comment-time text-muted">{{comment().timestamp | timeAgo}}</span>
@if (comment().edited) {
  <span class="isEdited text-muted">Edited</span>
}
