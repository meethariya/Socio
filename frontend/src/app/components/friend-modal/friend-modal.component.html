<div class="modal-header">
  @if (userSerachRequired) {
    <form class="d-flex user-search-form" role="search" [formGroup]="searchForm" (ngSubmit)="searchUser()">
      <input class="form-control" type="search" placeholder="Search people" aria-label="Search"
        id="model-user-search" formControlName="search" ngbAutoFocus>
      <button class="btn" type="submit" [disabled]="searchForm.invalid">
        <svg height="24px" width="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M15.7955 15.8111L21 21M18 10.5C18 14.6421 14.6421 18 10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5Z"
            stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    </form>
  }
  @else {
    <form [formGroup]="filterForm">
      <input type="text" class="form-control filter-results" placeholder="filter results" formControlName="filter" name="filter">
    </form>
  }
  <button type="button" class="btn-close" aria-label="Close" (click)="activeModal.dismiss('cross button')"></button>
</div>
<div class="modal-body container">
  @if (safeFriendList().length) {
    @for (user of safeFriendList(); track user.id) {
      <div class="row">
        <div class="col-2">
          <svg width="48px" height="48px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"class="user-profile">
            <g id="SVGRepo_iconCarrier">
              <circle cx="12" cy="9" r="3" stroke="currentcolor" stroke-width="1.5" />
              <path d="M17.9691 20C17.81 17.1085 16.9247 15 11.9999 15C7.07521 15 6.18991 17.1085 6.03076 20"
                stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" />
              <path
                d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7"
                stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" />
            </g>
          </svg>
        </div>
        <div class="col-7">
          <h4 class="name">{{user.name}}</h4>
          <h6 class="username">{{"@"+user.username}}</h6>
        </div>
        <div class="col-3 d-flex align-items-center justify-content-center gap-3">
          @if (user.isFriend==null || user.isFriend=="NOT FRIEND") {
            <button type="button" class="btn bg-orange" (click)="addFriend(user.id)" title="Send request">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 64 64" stroke-width="4" stroke="currentColor" fill="none"><circle cx="29.22" cy="16.28" r="11.14"/><path d="M41.32,35.69c-2.69-1.95-8.34-3.25-12.1-3.25h0A22.55,22.55,0,0,0,6.67,55h29.9"/><circle cx="45.38" cy="46.92" r="11.94"/><line x1="45.98" y1="39.8" x2="45.98" y2="53.8"/><line x1="38.98" y1="46.8" x2="52.98" y2="46.8"/></svg>
            </button>
          }
          @else if (user.isFriend=='REQUEST SENT') {
            <button type="button" class="btn bg-orange" title="request sent">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px"viewBox="0 0 512 512">
                <g>
                  <path fill="currentColor" d="M406.591,354.932c-16.943-6.336-36.233-16.2-36.233-28.963c0-8.45,0-19.007,0-33.489   c6.194-17.19,15.514-18.42,20.181-44.803c10.861-3.882,17.07-10.09,24.819-37.251c5.827-20.443-2.757-25.93-8.315-27.394   c0.113-1.089,0.226-2.185,0.325-3.472c2.093-30.618,19.87-121.503-41.678-132.365c-16.292-12.671-26.63-18.413-61.547-16.292   c-22.104-0.008-38.905,4.872-62.31-1.818C227.578,41.045,221.653,65.503,219.8,92.48c-4.101-2.871-8.414-5.459-13.492-7.425   c-7.707-2.984-16.504-4.32-27.761-4.306c-3.507,0-7.297,0.128-11.398,0.375c-11.766,0.07-21.186,1.463-29.939,1.428   c-6.138-0.006-12.036-0.58-18.965-2.552l-5.544-1.584l-4.426,3.706c-5.176,4.356-9.079,9.836-12.092,15.818   c-4.497,9.002-7.099,19.248-8.725,30.102c-1.612,10.847-2.192,22.316-2.192,33.666c0,18.936,1.612,37.548,3.069,51.874   c-0.778,0.616-1.556,1.231-2.292,2.016c-1.895,2.022-3.535,4.617-4.582,7.552c-1.061,2.935-1.57,6.166-1.57,9.588   c0,4.038,0.679,8.358,2.05,13.174c3.436,11.922,6.548,19.933,11.06,26.333c2.248,3.168,4.95,5.848,7.863,7.863   c1.004,0.708,2.037,1.238,3.055,1.789c2.503,9.708,6.364,17.062,9.687,22.224c1.966,3.069,3.662,5.459,4.597,7.05   c0.466,0.792,0.749,1.372,0.876,1.683l0.029,0.078c0,11.576,0,20.167,0,27.047l-0.198,0.438c-0.325,0.601-1.216,1.747-2.659,3.012   c-4.313,3.939-13.237,8.316-20.365,10.763c-12.204,4.334-35.568,12.805-56.456,29.514c-10.437,8.365-20.308,18.894-27.591,32.11   C4.554,429.003-0.014,444.885,0,463.192c0,3.182,0.142,6.435,0.411,9.765l0.834,9.956h116.886h1.768h391.657   C518.781,396.291,436.021,365.942,406.591,354.932z M259.328,325.969c0,12.763-20.832,23.533-36.233,28.963   c-27.012,9.518-97.964,36.063-104.851,106.258H21.85c0.325-13.802,3.692-25.173,9.023-34.896   c8.373-15.267,21.85-26.701,35.695-35.045c13.845-8.351,27.775-13.484,36.544-16.567c7.155-2.546,15.429-6.174,22.684-11.201   c3.62-2.539,7.042-5.424,9.885-9.143c2.8-3.663,5.134-8.528,5.148-14.256c0-7.106,0-15.981,0-28.157v-0.559l-0.057-0.558   c-0.495-4.54-2.277-7.962-3.889-10.72c-2.503-4.158-5.048-7.438-7.326-11.603c-2.263-4.144-4.342-9.051-5.6-16.123l-1.104-6.215   l-5.94-2.122c-1.739-0.629-2.814-1.167-3.649-1.754c-1.202-0.877-2.39-1.972-4.228-5.352c-1.782-3.338-3.875-8.803-6.208-16.978   c-0.948-3.302-1.23-5.693-1.216-7.206c0-1.294,0.184-1.944,0.268-2.199l0.029-0.07l0.353-0.106l9.433-2.122l-1.004-9.617   c-1.57-14.771-3.719-36.006-3.705-56.915c-0.014-14.128,1.004-28.094,3.62-39.415c1.301-5.664,2.998-10.634,4.993-14.616   c1.004-1.994,2.064-3.72,3.182-5.198c6.576,1.343,12.714,1.803,18.428,1.796c11.059-0.036,20.407-1.471,30.462-1.442h0.325   l0.325-0.021c3.819-0.233,7.199-0.34,10.225-0.34c9.674,0.007,15.387,1.103,19.927,2.85c4.539,1.747,8.528,4.448,14.27,8.931   l1.697,1.315l4.695,2.093c0.227,24.416,2.644,48.452,4.413,65.217c-5.502,1.23-14.977,6.336-8.91,27.549   c7.75,27.16,13.958,33.369,24.82,37.251c4.653,26.383,18.838,34.854,19.87,44.803C259.328,306.962,259.328,317.519,259.328,325.969   z"/>
                </g>
              </svg>
            </button>
          }
          @else if (user.isFriend=='REQUEST RECEIVED') {
            <button type="button" class="btn bg-success text-white" title="Approve request" (click)="approveRequest(user.id)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" version="1.1" id="Capa_1" width="12px" height="12px" viewBox="0 0 48.434 48.434">
                <g>
                  <path d="M46.821,7.201c-2.832-2.829-8.419-1.829-12.48,2.233l-9.854,9.856c-4.061,4.061-9.68,5.026-12.551,2.154   c-2.87-2.872-7.492-2.902-10.324-0.07s-1.835,8.421,2.226,12.481l5.931,5.933c4.06,4.062,10.653,4.072,14.716,0.013   c5.92-5.917,14.197-14.2,20.114-20.122C48.657,15.616,49.652,10.029,46.821,7.201z"/>
                </g>
              </svg>
            </button>
            <button type="button" class="btn bg-danger text-white" title="Reject request" (click)="rejectRequest(user.id)">
              <svg xmlns="http://www.w3.org/2000/svg" width="12px" height="12px" viewBox="0 0 25 25">
                <g transform="translate(-469.000000, -1041.000000)" fill="currentColor">
                    <path d="M487.148,1053.48 L492.813,1047.82 C494.376,1046.26 494.376,1043.72 492.813,1042.16 C491.248,1040.59 488.712,1040.59 487.148,1042.16 L481.484,1047.82 L475.82,1042.16 C474.257,1040.59 471.721,1040.59 470.156,1042.16 C468.593,1043.72 468.593,1046.26 470.156,1047.82 L475.82,1053.48 L470.156,1059.15 C468.593,1060.71 468.593,1063.25 470.156,1064.81 C471.721,1066.38 474.257,1066.38 475.82,1064.81 L481.484,1059.15 L487.148,1064.81 C488.712,1066.38 491.248,1066.38 492.813,1064.81 C494.376,1063.25 494.376,1060.71 492.813,1059.15 L487.148,1053.48"/>
                </g>
              </svg>
            </button>
          }
          @else {
            <button type="button" class="btn bg-orange" title="remove friend" (click)="removeFriend(user.id)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24px" height="24px" viewBox="0 0 1000 1000">
                <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)">
                  <path d="M2674.4,4993.2c-34.4-24.9-34.4-47.9-13.4-635.5c13.4-394.3,13.4-620.2,1.9-643.1c-34.4-65.1-101.4-61.2-237.3,13.4c-109.1,61.3-134,68.9-174.2,49.8c-26.8-11.5-51.7-32.5-57.4-47.9c-5.7-15.3,49.8-313.9,124.4-660.4l135.9-633.6v-580v-578l93.8-279.5c51.7-153.1,122.5-335,155-402c174.2-348.4,467-685.2,761.8-880.5c157-101.5,158.9-103.4,149.3-170.4c-5.7-36.4-11.5-86.1-11.5-107.2c0-40.2-11.5-42.1-290.9-51.7c-227.8-7.7-323.5-19.1-426.8-51.7c-181.8-57.4-377.1-174.2-501.5-304.3C2215-1145.2,1330.7-2326.2,1258-2473.6c-112.9-225.9-124.4-308.2-124.4-823c0-348.4,7.7-488.1,28.7-574.2c82.3-325.4,321.6-622.1,620.2-771.4c250.7-126.3,231.6-155,231.6,359.8c0,482.3,5.7,516.8,109.1,589.5c88,61.3,164.6,68.9,262.2,24.9c158.9-68.9,164.6-91.9,164.6-637.4V-4780h1875.8h1875.8v474.7c0,434.5,3.8,478.5,38.3,534c74.7,124.4,201,162.7,333.1,103.3c158.9-68.9,164.6-91.9,164.6-635.4v-470.9l105.3,17.2c367.5,57.4,706.3,312,869,652.7c114.8,243.1,126.3,312,126.3,798.2c0,346.4-7.7,455.5-34.5,555.1c-44,168.4-149.3,371.3-256.5,497.7l-90,105.3h-317.7c-271.8,0-338.8,5.7-478.5,44C6106.3-1924.2,5601-1407.4,5436.4-749c-61.3,252.7-59.3,635.5,9.6,890c53.6,206.7,166.5,447.9,290.9,620.1c162.7,227.8,472.8,484.3,710.1,587.6l103.4,44V2302c0,1001-1.9,1018.3-120.6,1263.3c-84.2,174.2-323.5,413.4-493.8,493.8c-241.2,114.8-277.5,118.7-1108.2,120.6h-756.1L3909,4392.2c-90,116.7-185.7,229.7-214.4,250.7c-47.9,36.4-53.6,36.4-99.5,5.7c-26.8-17.2-49.8-45.9-49.8-65.1c0-49.8-38.3-80.4-97.6-80.4c-38.3,0-134,67-363.7,258.4c-172.3,141.6-327.3,258.4-342.6,258.4C2724.2,5020,2693.6,5008.5,2674.4,4993.2z"/>
                  <path d="M7138,1170.8c-170.4-24.9-417.3-116.8-574.2-216.3c-86.1-53.6-204.8-153.1-298.6-252.7c-304.3-321.6-449.8-756-401.9-1194.4c49.8-444.1,298.6-855.6,671.8-1102.5c673.8-449.8,1592.5-271.8,2063.4,400c179.9,254.6,268,537.9,268,865.2c0,438.3-162.7,813.5-484.3,1114C8051,1094.3,7589.7,1237.8,7138,1170.8z M7589.7,569.8c61.3-15.3,141.7-44,178-63.2l67-34.5l-656.5-587.6c-359.8-323.5-660.3-581.9-668-574.2c-30.6,30.6-74.7,246.9-74.7,359.8c0,415.4,289,790.5,691,897.7C7262.4,604.3,7453.8,606.2,7589.7,569.8z M8255.8-84.8c42.1-143.6,30.6-413.4-21-551.3c-145.5-380.9-482.3-622.1-870.9-622.1c-124.4,0-300.5,38.3-394.3,86.1l-55.5,30.6l645,580c356,319.6,652.7,578,658.4,574.2C8223.3,9,8240.5-35,8255.8-84.8z"/>
                </g>
              </svg>
            </button>
          }
        </div>
      </div>
    }
  }
  @else {
    <div class="row">
      <div class="col-12">
        <div class="text-center text-muted p-4">
          No results found
        </div>
      </div>
    </div>
  }
</div>
